# Easy Quiz

Веб-сервис для быстрого создания интерактивных квизов и отслеживания ответов студентов в реальном времени. Приложение написано на PHP, HTML, CSS и JavaScript и не требует сторонних зависимостей.

## Развёртывание

Публичные файлы приложения находятся в директории `public/`, а логика и данные (`lib/`, `data/`) расположены вне веб-корня. Благодаря этому служебные скрипты и содержимое квизов недоступны напрямую из браузера.

Пример конфигурации Nginx для сервера, работающего через PHP-FPM:

```
server {
        listen 127.0.0.1:8080 default_server;
        listen [::1]:8080 default_server;

        root /home/deploy/quiz/public;
        index index.php index.html index.htm;

        server_name _;

        location / {
                try_files $uri $uri/ /index.php?$query_string;
        }

        location ~* ^/(data|lib|vendor|composer\.json|composer\.lock) {
                deny all;
        }

        location ~ \.php$ {
                include snippets/fastcgi-php.conf;
                fastcgi_pass unix:/run/php/php8.2-fpm.sock;
        }

        location ~* \.(json|lock|env|ini|log)$ {
                deny all;
        }
}
```

При необходимости скорректируйте путь к сокету `fastcgi_pass` в соответствии с установленной версией PHP.

## Возможности

- Конструктор квизов с неограниченным количеством вопросов и вариантов ответов.
- Автоматическая генерация ссылки и QR-кода для подключения студентов.
- Участие студентов под произвольными никнеймами и отдельным полем для имени в отчёте.
- Запуск и завершение квиза преподавателем, показ статистики в реальном времени.
- Экспорт результатов в CSV с детализацией по каждому участнику и вопросу.

## Быстрый старт

1. Скопируйте репозиторий на сервер с поддержкой PHP 8+.
2. Убедитесь, что у веб-процесса есть права на запись в директорию `data/`.
3. Откройте в браузере `index.php`, чтобы познакомиться с сервисом, затем перейдите на страницу `create.php` и заполните конструктор квиза.
4. Перед началом лекции откройте страницу управления, покажите QR-код на экране и дождитесь подключения студентов.
5. Нажмите «Начать квиз», чтобы открыть доступ к вопросам. После завершения — «Завершить квиз» и выгрузите результаты в CSV.

### Запуск WebSocket-сервера для ответов

Для потоковой передачи результатов используйте встроенный WebSocket-сервер (порт `3001`), принимающий только сообщения `quiz_result` от студентов и рассылающий их подключённым клиентам (странице преподавателя):

```bash
php lib/ws-server.php
```

По умолчанию фронтенд подключается к `ws://<домен>:3001/api/1` (настройки в `public/assets/ws-config.js`).

## Структура проекта

- `public/index.php` — стартовая страница с описанием сервиса и инструкцией.
- `public/create.php` — конструктор квиза.
- `public/host.php` — панель преподавателя с QR-кодом, управлением статусом и статистикой.
- `public/quiz.php` — интерфейс студента для подключения и отправки ответов.
- `public/assets/` — статические стили и скрипты.
- `lib/` — вспомогательные функции PHP.
- `data/` — хранилище метаданных квизов, участников и ответов (создаётся автоматически и располагается вне веб-корня).

## Лицензия

Проект распространяется под лицензией MIT. Используйте и расширяйте под свои задачи.
